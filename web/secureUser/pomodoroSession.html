<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Start a Pomodoro!</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    </head>
    <body>
        <!-- Display the timer in an element -->
        <p id="timer"></p>
        <button class="start">Start</button>
        <button class="pause">Pause</button>
        <button class="reset">Reset</button>
        <button onclick="goBack()">Cancel</button>
        <script>
        function goBack() {
            window.history.back();
        }
        </script> 

        <script>
        var isPaused = true;
        var defaultPomodoroLength = calcMinutesInSeconds(25);
        var totalSecondsLeft = defaultPomodoroLength;
        var minutesLeft = Math.floor(totalSecondsLeft/60);
        var secondsLeft = totalSecondsLeft % 60;
        // Update the count down every 1 second
        var x = setInterval(updateTimer, 1000);
        document.getElementById("timer").innerHTML = "Time Left: [" + minutesLeft + " minutes, " + secondsLeft + " seconds]";


        //Use jquery for the buttons actions
        $(document).ready(function(){
            $(".pause").hide();
        });

        $('.pause').on('click', function(e) {
            e.preventDefault();
            isPaused = true;
            $(".start").show();
            $(".pause").hide();
        });

        $('.start').on('click', function(e) {
            e.preventDefault();
            isPaused = false;
            $(".start").hide();
            $(".pause").show();
        });

        $('.reset').on('click', function(e) {
            e.preventDefault();
            isPaused = true;
            totalSecondsLeft = defaultPomodoroLength;
            minutesLeft = Math.floor(totalSecondsLeft/60);
            secondsLeft = totalSecondsLeft % 60;
            document.getElementById("timer").innerHTML = "Time Left: [" + minutesLeft + " minutes, " + secondsLeft + " seconds]";
            $(".start").show();
            $(".pause").hide();
        });

        function calcMinutesInSeconds(minutesDesired){
            var secondsNeeded = 60 * minutesDesired;
            return secondsNeeded;
        }

        //Function to handle updating the timer
        function updateTimer(){
            if(!isPaused){
                totalSecondsLeft -= 1;
                minutesLeft = Math.floor(totalSecondsLeft/60);
                secondsLeft = totalSecondsLeft % 60;
                // Display the result in the element with id="demo"
                document.getElementById("timer").innerHTML = "Time Left: [" + minutesLeft + " minutes, " + secondsLeft + " seconds]";
                // If the count down is finished, write some text
                if (secondsLeft < 0) {
                  clearInterval(x);
                  document.getElementById("timer").innerHTML = "EXPIRED";
                }
            }
        }
        </script>
        
    </body>
</html>
